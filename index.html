<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Sniper J GM æ¨¡æ“¬å™¨ v0.1+</title>
  <style>
    body {
      font-family: "Helvetica Neue", sans-serif;
      background: linear-gradient(to right, #f9f9f9, #e6f0ff);
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #2c3e50;
    }
    button {
      margin: 5px;
      padding: 10px 15px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background-color: #3498db;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #2980b9;
    }
    .player {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fefefe;
      border: 1px solid #ddd;
      padding: 10px;
      margin-bottom: 8px;
      border-radius: 6px;
    }
    .player-info {
      flex-grow: 1;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ€ Sniper J GM æ¨¡æ“¬å™¨ v0.1+</h1>
    <div id="infoBar" style="margin-bottom:10px;"></div>

    <div class="section">
      <button onclick="showWarriors()">å‹‡å£«é™£å®¹</button>
      <button onclick="showFreeAgents()">è‡ªç”±å¸‚å ´</button>
      <button onclick="showOtherTeams()">å…¶ä»–éšŠä¼</button>
    </div>

    <div id="displayArea" style="margin-top:20px;"></div>
  </div>

  <script>
    const data = {
      warriors: [
        { name:"Stephen Curry", rating:"S", salary:35 },
        { name:"Klay Thompson", rating:"B+", salary:20 },
        { name:"Draymond Green", rating:"B", salary:18 },
        { name:"Jonathan Kuminga", rating:"B", salary:15 },
        { name:"Andrew Wiggins", rating:"B+", salary:22 }
      ],
      freeAgents: [
        { name:"Malik Beasley", rating:"B", salary:15 },
        { name:"Robert Covington", rating:"B-", salary:12 }
      ],
      teams: {
        é›·éœ†: [
          { name:"Shai Gilgeous-Alexander", rating:"S", salary:34 },
          { name:"Chet Holmgren", rating:"A-", salary:18 }
        ],
        é‡‘å¡Š: [
          { name:"Nikola Jokic", rating:"S+", salary:38 },
          { name:"Jamal Murray", rating:"A", salary:27 }
        ]
      },
      firstRoundPicks: 1
    };

    function ratingStars(rating) {
      const map = { C:1, "C+":2, "B-":3, B:4, "B+":5, "A-":6, A:7, "A+":8, S:9, "S+":10 };
      return "â˜…".repeat(Math.min(5, Math.round((map[rating]||1)/2)));
    }

    function updateInfo() {
      const salary = data.warriors.reduce((sum, p) => sum + p.salary, 0);
      document.getElementById("infoBar").textContent = `ï½œå‹‡å£«çƒå“¡ï¼š${data.warriors.length} äºº ï½œåœ˜éšŠè–ªè³‡ï¼š${salary}M ï½œé¦–è¼ªç±¤ï¼š${data.firstRoundPicks}`;
    }

    function showWarriors() {
      const list = data.warriors.map(p =>
        `<div class="player"><div class="player-info"><b>${p.name}</b>ï½œ${p.rating}ï½œ${ratingStars(p.rating)}ï½œ$${p.salary}M</div></div>`
      ).join("");
      document.getElementById("displayArea").innerHTML = `<h2>ğŸ’› å‹‡å£«é™£å®¹</h2>${list}`;
    }

    function showFreeAgents() {
      const list = data.freeAgents.map((p, i) =>
        `<div class="player"><div class="player-info"><b>${p.name}</b>ï½œ${p.rating}ï½œ${ratingStars(p.rating)}ï½œ$${p.salary}M</div>
        <button onclick="signPlayer(${i})">ç°½ä¸‹</button></div>`
      ).join("");
      document.getElementById("displayArea").innerHTML = `<h2>ğŸŸ¢ è‡ªç”±å¸‚å ´</h2>${list}`;
    }

    function signPlayer(index) {
      const player = data.freeAgents[index];
      data.warriors.push(player);
      data.freeAgents.splice(index, 1);
      alert(`âœ… ç°½ä¸‹ ${player.name}ï¼`);
      updateInfo();
      showFreeAgents();
    }

    function showOtherTeams() {
      let html = `<h2>ğŸŒ å…¶ä»–éšŠä¼</h2>`;
      for (let teamName in data.teams) {
        html += `<h3>ğŸ· ${teamName}</h3>`;
        html += data.teams[teamName].map(p =>
          `<div class="player"><div class="player-info"><b>${p.name}</b>ï½œ${p.rating}ï½œ${ratingStars(p.rating)}ï½œ$${p.salary}M</div>
          <button onclick="startTrade('${teamName}', '${p.name}')">äº¤æ˜“</button></div>`
        ).join("");
      }
      document.getElementById("displayArea").innerHTML = html;
    }

    function startTrade(teamName, targetPlayerName) {
      const confirmTrade = prompt(`ä½ æƒ³ç”¨å“ªäº›å‹‡å£«çƒå“¡äº¤æ˜“ ${targetPlayerName}ï¼Ÿï¼ˆè«‹è¼¸å…¥åå­—ï¼Œç”¨é€—è™Ÿåˆ†éš”ï¼‰\nå¯è¼¸å…¥ "åŒ…å«é¦–è¼ª" ä¾†é€å‡ºé¦–è¼ªç±¤ï¼Œä¾‹å¦‚ï¼šKlay Thompson, åŒ…å«é¦–è¼ª`);
      if (!confirmTrade) return;

      const parts = confirmTrade.split(',').map(s => s.trim());
      const includePick = parts.includes("åŒ…å«é¦–è¼ª");
      const myNames = parts.filter(n => n !== "åŒ…å«é¦–è¼ª");

      const myPlayers = [];
      let myTotal = 0;
      for (let name of myNames) {
        const idx = data.warriors.findIndex(p => p.name === name);
        if (idx === -1) return alert(`âš ï¸ æ‰¾ä¸åˆ°å‹‡å£«çƒå“¡ï¼š${name}`);
        myPlayers.push(data.warriors[idx]);
        myTotal += data.warriors[idx].salary;
      }

      const getOther = prompt(`ä½ è¦å¾ ${teamName} å†æ›èª°ï¼Ÿï¼ˆå¯ç•™ç©ºåªæ› ${targetPlayerName}ï¼Œç”¨é€—è™Ÿåˆ†éš”ï¼‰`);
      if (getOther === null) return;

      const getNames = [targetPlayerName];
      if (getOther.trim()) {
        getOther.split(',').map(s => s.trim()).forEach(n => getNames.push(n));
      }

      const team = data.teams[teamName];
      const otherPlayers = [];
      let otherTotal = 0;
      for (let name of getNames) {
        const idx = team.findIndex(p => p.name === name);
        if (idx === -1) return alert(`âš ï¸ ${teamName} æ²’æœ‰çƒå“¡ï¼š${name}`);
        otherPlayers.push(team[idx]);
        otherTotal += team[idx].salary;
      }

      const diff = Math.abs(myTotal - otherTotal);
      const allowedDiff = 5;
      if (diff > allowedDiff) return alert(`âŒ é›™æ–¹è–ªè³‡å·®è· ${diff}M è¶…å‡ºå…è¨±ï¼ˆÂ±${allowedDiff}Mï¼‰`);

      // åŸ·è¡Œäº¤æ˜“
      data.warriors = data.warriors.filter(p => !myPlayers.includes(p)).concat(otherPlayers);
      data.teams[teamName] = team.filter(p => !otherPlayers.includes(p)).concat(myPlayers);
      if (includePick) {
        if (data.firstRoundPicks <= 0) return alert("âš ï¸ æ²’æœ‰é¦–è¼ªç±¤äº†ï¼");
        data.firstRoundPicks--;
      }

      alert(`âœ… å®Œæˆäº¤æ˜“ï¼šé€å‡º ${myNames.join(", ")} ${includePick ? "ï¼‹é¦–è¼ªç±¤" : ""} æ›ä¾† ${getNames.join(", ")}`);
      updateInfo();
      showOtherTeams();
    }

    window.onload = () => {
      updateInfo();
      showWarriors();
    };
  </script>
</body>
</html>